# Idea Exiv2 metatdata as source of truth for tag info

While create typescript declarations for exif-reader I did some research to figure out the
correct type of each tag. I believed I had discovered some inconsistencies in the tags.js definitions,
which triggered a deeper research in the exif format.

The tag list provided by the [exiftool](http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/EXIF.html)
is huge and the types are difficult to get from the description. It seems to specify the type of
the input data and not of the type of the tag itself.
I was searching for a better description, e.g. the [Exif spec](https://www.cipa.jp/std/documents/e/DC-008-2012_E.pdf)
itself. It turned out that this spec is even harder to digest.

Luckily I found another project, [Exiv2](https://exiv2.org/index.html) that exports
a structured list of [standard Exif tags](https://exiv2.org/index.html).
With this help I was finally able to understand also the Exif spec and could verify
that exif-reader is correct. I just had to learn that Exifs allows multiple IDFs,
and from the viewpoint of Exif is possible to have the same tag in IDF0 and in IDF1 e.g.

I believe the goal of exif-reader is to provide simple access to the standard tags
and not all possible vendor tags. Therefore I think we could generate the tag
info from the well maintained exiv2 project and just generate the tag info
and typescript types from their metadata.

I know that there are other projects:

- [exiv2](https://www.npmjs.com/package/exiv2?activeTab=readme)
- [ExifReader](https://www.npmjs.com/package/exifreader)

The first package is basicly unmaintained for a long time and needs to compile
the Eviv2 C++ source code.
The second one looks better but seems to be more intended for use in the browser
(you can build your own package with only the needed tags), it's more
complex and it's not clear how the tag types are maintained.

I like the simple and forgiving parsing model of exif-reader and would
just like to generate the tag info from a more maintained project.

This is a breaking change as tag names will change, so thiw would be a major version upgrade.

## generate tag info from

### from Exiv2 metadata website

https://exiv2.org/tags.html

```
Array.from($("tbody > tr")).map(tr => Array.from(tr.children).map(e => e.innerText)).map(([tag,,,key,type]) => ([tag, key.split(".").slice(1), type].flat()))

```

### Using the taglist tool from the Exiv2 project

As I know that the website is generated by the taglist tool, the one liner above to export the taglists to json was good enough for me. Actually I was not able to get eviv2 compiling on my machine.
